<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <th:block th:replace="/layout/head :: headFragment "></th:block>
  <link rel="stylesheet" th:href="@{/css/header.css}">
  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" th:href="@{/css/upload.css}">
  <title>Title</title>
</head>
<body>
<header th:replace="/layout/header :: headerFragment"></header>
<div id="wrapper">
  <div class="container">
    <form th:action="@{/Item/upload}" name="uploader" method="post" enctype="multipart/form-data">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
      <img style="width: 500px; height: 500px" id="previewImage" src="https://dummyimage.com/500x500/ffffff/000000.png&text=file upload">
      <input style="display: block;" type="file" id="inputImage" name="file">
      <input type="hidden" name="category" value="">
      <button class="btn_re btn-primary btn-lg" type="submit">업로드</button>
    </form>

    <script type="text/javascript">
      // 단일파일업로드
      function readImage(input) {
        if (input.files && input.files[0]) {
          const reader = new FileReader();

          reader.onload = (e) => {
            const previewImage = document.getElementById('previewImage');
            previewImage.src = e.target.result;
          }
          reader.readAsDataURL(input.files[0]);
        }
      }
      // 이벤트 리스너
      document.getElementById('inputImage').addEventListener('change', (e) => {
        readImage(e.target);
      })
    </script>

    <script>
      category = "Pullover";
      document.uploader.category.value=category;
    </script>
  </div>
</div>
</body>
<footer th:replace="/layout/footer :: footerFragment"></footer>
</html>